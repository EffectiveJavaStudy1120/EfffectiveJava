## Item 17 변경가능성을 최소화하라.

### 클래스를 불변으로 만드는 5가지 방법

1. 객체 상태를 변경하는 메서드를 제공하지 않는다 (ex : Setter 메서드)
2. 클래스를 확장할 수 없도록 한다
3. 모든 필드를 final 로 한다
4. 모든 필드를 private 로 한다
5. 자신외에는 내부 가변 컴포넌트에 접근 할 수 없도록 한다
   - 가변 객체를 참조하는 필드가 존재할 경우 클라이언트가 접근하지 못하도록 해야함
   - 접근자 메서드로 반환하면 안됌
   - 생성자 접근자 readObject 메서드 모두 방어적 복사를 수행해야함

### 불변객체의 장점

1. 불변 객체는 근본적으로 Thread-Safe 하여 따로 동기화할 필요가 없다
2. 한번 만든 인스턴스는 최대한 재활용 할 수 있다
3. 방어적 복사가 필요없다
   - 가변 객체를 참조할 경우는 필요하다
4. 불변객체는 자유롭게 공유할수 있음은 물론 불변 객체끼리 내부 데이터를 공유할 수 있다
5. 객체를 만들때 다른 불변객체들을 구성요소로 사용하면 이점이 많다
6. 불변 객체는 그 자체로 실패 원자성을 제공
   - 실패 원자성(failure atomicity)이란 '메서드에서 예외가 발생한 후에도 그 객체는 여전히 (메서드 호출 전과 똑같은) 유효한 상태여야 한다'는 성질이다.


### 불변객체의 단점

1. 메모리 사용량증가
    - 불변 객체는 변경이 불가능하므로 매번 새로운 객체를 생성해야 하는데 이는 메모리 사용량을 증가할 수 있음을 의미함, 특히 큰 객체를 자주 사용하는 경우에는 성능의 문제를 일으킬 확률이 큼
2. 객체 생성 오버헤드
    - 불변 객체는 변경할 수 없기 때문에 새로운 상태의 객체를 생성해야합니다 이로인해 오버헤드가 발생할 수 있음
3. Wrapper Class 사용
    - 박스 클래스를 사용하기 때문에 원시 타입보다 메모리 차지하는 비율이 훨씬 높습니다.
      원시타입이 사용하는 메모리
      참조타입이 사용하는 메모리

| 원시타입 메모리       | 참조타입이 사용하는 메모리 |
| --------------------- | -------------------------- |
| boolean - 1bit        | Boolean – 128 bits         |
| byte - 8bits          | Byte - 128bits             |
| short, cagr - 16bits  | Short, Charater - 128bits  |
| int, float - 32bits   | Integer, Float - 128bits   |
| long, double - 64bits | Long, Double - 196bits     |


#### 결론
결론적으로 다른 합당한 이유가 없다면 **모든 필드는 private final** 을 사용하여 불변객체를 만들어 주는것이 좋다

